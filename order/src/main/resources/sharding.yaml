databaseName: shardingDB
mode:
  type: Standalone
  repository:
    type: JDBC
props:
  sql-show: true
dataSources:
  ds_0:
    dataSourceClassName: com.alibaba.druid.pool.DruidDataSource
    driverClassName: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/order?useUnicode=true&characterEncoding=UTF-8&allowMultiQueries=true&serverTimezone=GMT%2B8&useSSL=false
    username: root
    password: root
  ds_1:
    dataSourceClassName: com.alibaba.druid.pool.DruidDataSource
    driverClassName: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/order_1?useUnicode=true&characterEncoding=UTF-8&allowMultiQueries=true&serverTimezone=GMT%2B8&useSSL=false
    username: root
    password: root
  ds_2:
    dataSourceClassName: com.alibaba.druid.pool.DruidDataSource
    driverClassName: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/order_2?useUnicode=true&characterEncoding=UTF-8&allowMultiQueries=true&serverTimezone=GMT%2B8&useSSL=false
    username: root
    password: root
rules:
  - !SHARDING
    tables:
      order_t:
        actualDataNodes: ds-$->{0..2}.order_t
        keyGenerateStrategy:
          column: order_id
          keyGeneratorName: snowflake
        databaseStrategy:
          standard:
            shardingColumn: user_id
            shardingAlgorithmName: orderInline
    keyGenerators:
      snowflake:
        type: SNOWFLAKE
    shardingAlgorithms:
      order-inline:
        type: INLINE
        props:
          algorithm-expression: ds-$->{user_id % 3}
